<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>顯示經緯度與海拔</title>
</head>
<body>
    <h1>顯示當前位置</h1>
    <button onclick="getLocation()">取得我的位置</button>
    <div id="location-info">
        <p id="latitude"></p>
        <p id="longitude"></p>
        <p id="altitude"></p>
        <p id="accuracy"></p>
    </div>

    <script>
        function getLocation() {
            // 檢查是否支援 Geolocation API
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(showPosition, showError, {
                    enableHighAccuracy: true, // 啟用高精度定位
                    maximumAge: 0, // 不使用緩存
                    timeout: 5000 // 設定超時時間
                });
            } else {
                alert("這個瀏覽器不支援地理位置服務");
            }
        }

        function showPosition(position) {
            var latitude = position.coords.latitude; // 緯度
            var longitude = position.coords.longitude; // 經度
            var altitude = position.coords.altitude; // 海拔
            var accuracy = position.coords.accuracy; // 定位精度

            // 顯示位置資訊
            document.getElementById("latitude").textContent = "緯度: " + latitude;
            document.getElementById("longitude").textContent = "經度: " + longitude;
            document.getElementById("accuracy").textContent = "精度: " + accuracy + " 米";

            // 如果海拔資訊可用，則顯示
            if (altitude !== null) {
                document.getElementById("altitude").textContent = "海拔: " + altitude + " 米";
            } else {
                document.getElementById("altitude").textContent = "海拔: 無法獲取";
            }
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("用戶拒絕授權定位");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("無法獲取位置");
                    break;
                case error.TIMEOUT:
                    alert("獲取位置超時");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("未知錯誤");
                    break;
            }
        }
    </script>
</body>
</html>
